webpackJsonp([1],{E1Al:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("7+uW"),s=e("zL8q"),n=e.n(s),r=(e("tvR6"),{render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("el-row",{staticClass:"header",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}}),this._v(" "),a("el-col",{attrs:{offset:12,span:4}})],1)],1)},staticRenderFns:[]});var o={name:"App",components:{Header:e("VU/8")({name:"Header",data:function(){return{}},methods:{goTalent:function(){this.$router.push({path:"/talent"})},goHome:function(){this.$router.push({path:"/"})}}},r,!1,function(t){e("PDRJ")},"data-v-3be0b12c",null).exports},data:function(){return{path:""}},mounted:function(){this.path=this.$route.path},watch:{$route:function(t,a){this.path=t.path}}},l={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header"),this._v(" "),a("router-view")],1)},staticRenderFns:[]},c=e("VU/8")(o,l,!1,null,null,null).exports,d=e("/ocq"),u=e("woOf"),h=e.n(u),p=e("fZjL"),g=e.n(p),f=e("XLwt"),m=e.n(f);e("lHA8"),e("c/Tr"),e("pFYg");var v={data:function(){return{$_sidebarElm:null}},mounted:function(){var t,a,e,i,s,n,r,o,l,c=this;this.__resizeHandler=(t=function(){c.chart&&c.chart.resize()},a=100,i=void 0,s=void 0,n=void 0,r=void 0,o=void 0,l=function l(){var c=+new Date-r;c<a&&c>0?i=setTimeout(l,a-c):(i=null,e||(o=t.apply(n,s),i||(n=s=null)))},function(){for(var s=arguments.length,c=Array(s),d=0;d<s;d++)c[d]=arguments[d];n=this,r=+new Date;var u=e&&!i;return i||(i=setTimeout(l,a)),u&&(o=t.apply(n,c),n=c=null),o}),window.addEventListener("resize",this.__resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHandler),this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()}}};e("tcAE");var _={mixins:[v],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"550px"},figureData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{figureData:{deep:!0,handler:function(t){console.log(1),this.initChart()}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=m.a.init(this.$el,"macarons"),g()(this.figureData).length&&this.chart.setOption({title:{text:""},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",label:{normal:{show:!0,textStyle:{fontSize:12}}},legend:{x:"center",show:!1,data:["查询","机构","专家","起点"]},series:[{type:"graph",layout:"force",symbolSize:45,focusNodeAdjacency:!0,roam:!0,categories:[{name:"查询",itemStyle:{normal:{color:"#003366"}}},{name:"机构",itemStyle:{normal:{color:"#3399CC"}}},{name:"专家",itemStyle:{normal:{color:"#99CCFF"}}},{name:"起点",itemStyle:{normal:{color:"#32CD32"}}}],label:{normal:{show:!0,textStyle:{fontSize:16}}},force:{repulsion:3e3},edgeSymbolSize:[4,50],edgeLabel:{normal:{show:!0,textStyle:{fontSize:10},formatter:"{c}"}},data:this.figureData.nodes,links:this.figureData.lines,lineStyle:{normal:{opacity:.9,width:1,curveness:0}}}]})}}},y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},staticRenderFns:[]},b=e("VU/8")(_,y,!1,null,null,null).exports,D=e("7t+N"),w=e.n(D),C={name:"home",components:{figureChart:b},data:function(){return{searchShow:!1,name:"",org:"",showPath:"",figureData1:{},figureData2:{},figureData3:{},loading:!1}},methods:{search:function(){if(this.name)if(this.org){this.loading=!0,this.searchShow=!0;var t=this.assemblyData(this.name,this.org),a=this.getPid(t),e={type:"5",p1:a},i={type:"6",p1:a},s={type:"7",p1:a};this.getData(e,5),this.getData(i,6),this.getData(s,7)}else this.$message("请输入查询机构");else this.$message("请输入查询姓名")},assemblyData:function(t,a){var e=void 0,i=void 0;switch(t&&a?e="3":!t&&a?e="2":t&&!a&&(e="1"),e){case"1":i={type:e,s_name:t};break;case"2":i={type:e,s_org:a};break;case"3":default:i={type:e,s_name:t,s_org:a}}return i},getData:function(t,a){var e=this;w.a.ajax({type:"post",url:"http://183.136.237.197/graph_db",data:t,dataType:"json",success:function(t){if(e.loading=!1,t.data.length){if(5===a){var i=[],s=[];t.data.forEach(function(t,a){a?("Organization"===t.oClass?i.push({name:t.oData.Name+a,category:1,draggable:!0}):"Expert"===t.oClass&&i.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:2,draggable:!0}),s.push({source:0,rid:t.rid.cluster+t.rid.position,target:a,value:"合作关系"})):i.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:0,draggable:!0})}),e.figureData1=h()({},e.figureData1,{nodes:i,lines:s})}if(6===a){var n=[],r=[];t.data.forEach(function(t,a){a?("Organization"===t.oClass?n.push({name:t.oData.Name+a,category:1,draggable:!0}):"Expert"===t.oClass&&n.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:2,draggable:!0}),r.push({source:0,target:a,value:""})):n.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:0,draggable:!0})}),e.figureData2=h()({},e.figureData2,{nodes:n,lines:r})}if(7===a){var o=[],l=[];t.data.forEach(function(t,a){a?("Organization"===t.oClass?o.push({name:t.oData.Name+a,category:1,draggable:!0}):"Expert"===t.oClass&&o.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:2,draggable:!0}),l.push({source:0,target:a,value:""})):o.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:0,draggable:!0})}),e.showPath=e.name+"("+e.org+")",e.figureData3=h()({},e.figureData3,{nodes:o,lines:l})}}else e.$message("无有效合作关系信息！")}})},getPid:function(t){var a=void 0;return w.a.ajax({type:"post",url:"http://183.136.237.197/graph_db",data:t,dataType:"json",async:!1,success:function(t){a=t}}),a.data.length?"#"+a.data[0].rid.cluster+":"+a.data[0].rid.position:(this.$message("无有效合作关系信息！"),void(this.loading=!1))}},mounted:function(){},watch:{}},E={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"layer"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"home"},[e("div",{staticClass:"home-header MT_50"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("学者合作路径查询")]),t._v(" "),e("div",{staticClass:"home-header-search PR_20 PL_20"},[e("span",[t._v("查询人名")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("span",{staticClass:"ML_30"},[t._v("查询机构")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.org,callback:function(a){t.org=a},expression:"org"}}),t._v(" "),e("el-button",{staticClass:"ML_30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),t.searchShow?e("div",{staticClass:"home-body row MT_50"},[e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[e("div",{staticClass:"relation-top row"},[e("div",[e("span",[t._v("展示路径："+t._s(t.showPath)+"论文合作学者")])])]),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData1}})],1)])],1),t._v(" "),e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[e("div",{staticClass:"relation-top row"},[e("div",[e("span",[t._v("展示路径："+t._s(t.showPath)+"同机构学者")])])]),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData2}})],1)])],1),t._v(" "),e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[e("div",{staticClass:"relation-top row"},[e("div",[e("span",[t._v("展示路径："+t._s(t.showPath)+"同领域中国学者")])])]),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData3}})],1)])],1)]):t._e()])])},staticRenderFns:[]};var z=e("VU/8")(C,E,!1,function(t){e("E1Al")},null,null).exports;i.default.use(d.a);var S=new d.a({routes:[{path:"/",name:"Home",component:z}]}),$=e("NYxO");i.default.use($.a);var x=new $.a.Store({state:{bAuth:!1},mutations:{loginStatue:function(t,a){t.bAuth=a}}}),N=(e("j1ja"),e("Yg9U")),P=e.n(N);e("yh13");i.default.config.productionTip=!1,i.default.use(n.a),i.default.use(P.a),S.beforeEach(function(t,a,e){t.meta.requiresAuth?x.state.bAuth?e():(alert("请先登录"),e("/Login")):e(),document.body.scrollTop=0,document.documentElement.scrollTop=0,window.pageYOffset=0,e()}),new i.default({el:"#app",router:S,components:{App:c},template:"<App/>"})},PDRJ:function(t,a){},tvR6:function(t,a){},yh13:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.5b05219e9e125128ed12.js.map