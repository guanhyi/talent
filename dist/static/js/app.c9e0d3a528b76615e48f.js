webpackJsonp([1],{"/Rk4":function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i=e("zL8q"),n=e.n(i),l=(e("tvR6"),{render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("el-row",{staticClass:"header",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}}),this._v(" "),a("el-col",{attrs:{offset:12,span:4}})],1)],1)},staticRenderFns:[]});var o={name:"App",components:{Header:e("VU/8")({name:"Header",data:function(){return{}},methods:{goTalent:function(){this.$router.push({path:"/talent"})},goHome:function(){this.$router.push({path:"/"})}}},l,!1,function(t){e("PDRJ")},"data-v-3be0b12c",null).exports},data:function(){return{path:""}},mounted:function(){this.path=this.$route.path},watch:{$route:function(t,a){this.path=t.path}}},r={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header"),this._v(" "),a("router-view")],1)},staticRenderFns:[]},h=e("VU/8")(o,r,!1,null,null,null).exports,c=e("/ocq"),u=e("woOf"),d=e.n(u),p=e("fZjL"),m=e.n(p),v=e("XLwt"),f=e.n(v);e("lHA8"),e("c/Tr"),e("pFYg");var b={data:function(){return{$_sidebarElm:null}},mounted:function(){var t,a,e,s,i,n,l,o,r,h=this;this.__resizeHandler=(t=function(){h.chart&&h.chart.resize()},a=100,s=void 0,i=void 0,n=void 0,l=void 0,o=void 0,r=function r(){var h=+new Date-l;h<a&&h>0?s=setTimeout(r,a-h):(s=null,e||(o=t.apply(n,i),s||(n=i=null)))},function(){for(var i=arguments.length,h=Array(i),c=0;c<i;c++)h[c]=arguments[c];n=this,l=+new Date;var u=e&&!s;return s||(s=setTimeout(r,a)),u&&(o=t.apply(n,h),n=h=null),o}),window.addEventListener("resize",this.__resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHandler),this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()}}};e("tcAE");var _={mixins:[b],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"550px"},figureData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{figureData:{deep:!0,handler:function(t){console.log(1),this.initChart()}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=f.a.init(this.$el,"macarons"),m()(this.figureData).length&&this.chart.setOption({title:{text:""},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",label:{normal:{show:!0,textStyle:{fontSize:12}}},legend:{x:"center",show:!1,data:["查询","机构","专家","起点"]},series:[{type:"graph",layout:"force",symbolSize:45,focusNodeAdjacency:!0,roam:!0,categories:[{name:"查询",itemStyle:{normal:{color:"#003366"}}},{name:"机构",itemStyle:{normal:{color:"#3399CC"}}},{name:"专家",itemStyle:{normal:{color:"#99CCFF"}}},{name:"起点",itemStyle:{normal:{color:"#32CD32"}}}],label:{normal:{show:!0,textStyle:{fontSize:16}}},force:{repulsion:3e3},edgeSymbolSize:[4,50],edgeLabel:{normal:{show:!0,textStyle:{fontSize:10},formatter:"{c}"}},data:this.figureData.nodes,links:this.figureData.lines,lineStyle:{normal:{opacity:.9,width:1,curveness:0}}}]})}}},g={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},staticRenderFns:[]},y=e("VU/8")(_,g,!1,null,null,null).exports,D={name:"tableTem",props:{tableData:{type:Array,required:!0},serach:{type:Boolean,default:!1},haveData:{type:Boolean,default:!1},showPath:{type:String},lable:{type:String}},watch:{},data:function(){return{}},methods:{tableRowClassName:function(t){var a=t.row;t.rowIndex;return"zju"===a.texttype?"row-red":"chinese"===a.texttype?"row-highlighted":""},query:function(t){this.$emit("query",t)}},mounted:function(){}},w={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"tableTem"},[e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作路径")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[e("div",{staticClass:"relation-top row"},[e("div",[e("span",[t._v("展示路径："+t._s(t.showPath)+t._s(t.lable))])])]),t._v(" "),t.haveData?e("div",{staticClass:"row relation-echart"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.path,placement:"top-start"}},[e("span",[t._v(t._s(a.row.name))])])]}}],null,!1,1771750910)}),t._v(" "),e("el-table-column",{attrs:{label:"机构"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.path,placement:"top-start"}},[e("span",[t._v(t._s(a.row.org))])])]}}],null,!1,2693164483)}),t._v(" "),e("el-table-column",{attrs:{label:"邮箱"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.path,placement:"top-start"}},[e("span",[t._v(t._s(a.row.Email))])])]}}],null,!1,3858060277)}),t._v(" "),t.serach?e("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.query(a.row)}}},[t._v("查询")])]}}],null,!1,2970402045)}):t._e()],1)],1):e("div",{staticClass:"none"},[t._v("无符合此条件学者")])])],1)])},staticRenderFns:[]};var C=e("VU/8")(D,w,!1,function(t){e("mfEL")},null,null).exports,x=e("7t+N"),S=e.n(x),E={name:"home",components:{figureChart:y,tableTem:C},data:function(){return{activeName:"first",isSeach:!0,searchShow:!1,name:"zhuang,yueting",org:"zhejiang univ",showPath:"",figureData:{},p1:"",list:{},haveData:!0,tableData:{},times:{},i:0,dialogVisible:!1,loading:!1}},methods:{search:function(){if(this.name)if(this.org){this.haveData=!0,this.loading=!0,this.searchShow=!0,this.showPath=this.name+"("+this.org+")",this.activeName="first";var t=this.assemblyData(this.name,this.org);this.p1=this.getPid(t);var a={type:"5",p1:this.p1};this.getData(a,0)}else this.$message("请输入查询机构");else this.$message("请输入查询姓名")},assemblyData:function(t,a){var e=void 0,s=void 0;switch(t&&a?e="3":!t&&a?e="2":t&&!a&&(e="1"),e){case"1":s={type:e,s_name:t};break;case"2":s={type:e,s_org:a};break;case"3":default:s={type:e,s_name:t,s_org:a}}return s},getData:function(t,a){var e=this;e.tableData[a]=[],e.tableData[1]=[],S.a.ajax({type:"post",url:"http://183.136.237.195/graph_db",data:t,dataType:"json",success:function(t){var s=[],i=[];e.tableData1=[],t.data.forEach(function(t,n){n?("Organization"===t.oClass?s.push({name:t.oData.Name+n,category:1,draggable:!0}):"Expert"===t.oClass&&s.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+n,category:2,draggable:!0}),i.push({source:0,rid:t.rid.cluster+t.rid.position,target:n,value:"合作关系"})):s.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+n,category:0,draggable:!0}),e.tableData[a].push({texttype:t.texttype,Email:t.oData.Email,name:t.oData.Name,org:t.oData.Organization,path:e.name+"-"+t.oData.Name})}),2===a?(e.tableData[4]=t.coauthorsdata.map(function(t){return{texttype:t.texttype,Email:t.oData.Email,name:t.oData.Name,org:t.oData.Organization,path:e.name+"-"+t.oData.Name}}),e.secondSearch(e.tableData[4],a+1)):e.secondSearch(e.tableData[a],a+1),e.figureData[a]=d()({},e.figureData[a],{nodes:s,lines:i})}})},getPid:function(t){var a=void 0;return S.a.ajax({type:"post",url:"http://183.136.237.195/graph_db",data:t,dataType:"json",async:!1,success:function(t){a=t}}),a.data.length?"#"+a.data[0].rid.cluster+":"+a.data[0].rid.position:(this.haveData=!1,this.$message("无有效合作关系信息！"),void(this.loading=!1))},query:function(t){this.loading=!0;var a=this,e=this.assemblyData(t.name,t.org),s={type:"5",p1:this.getPid(e)};S.a.ajax({type:"post",url:"http://183.136.237.195/graph_db",data:s,dataType:"json",success:function(t){a.dialogVisible=!0,a.tableData[7]=t.data,a.loading=!1}})},handleClose:function(){this.dialogVisible=!1},handleClick:function(t,a){if("1"===t.index){if(!this.tableData[2].length){this.loading=!0;var e={type:"6",p1:this.p1};this.getData(e,2)}}else if("2"===t.index&&!this.tableData[5].length){this.loading=!0;var s={type:"7",p1:this.p1};this.getData(s,5)}},secondSearch:function(t,a){var e=this,s=0,i=[];this.loading=!1,t.forEach(function(t,a){if("zju"!==t.texttype){var s=e.assemblyData(t.name,t.org),n=e.getPid(s);S.a.ajax({type:"post",url:"http://183.136.237.195/graph_db",data:{type:"5",p1:n},dataType:"json",success:function(a){var e=a.data.map(function(a){return{name:a.oData.Name,org:a.oData.Organization,Email:a.oData.Email,path:t.path+"-"+a.oData.Name,texttype:a.texttype}});i=i.concat(e)}})}}),this.times[a]=setInterval(function(){s++,e.tableData[a].push(i[s]),s===i.length&&clearInterval(e.times[a])},1e3)}},mounted:function(){for(var t=0;t<8;t++)this.tableData[t]=[];this.search()},watch:{}},T={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"layer"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"home"},[e("div",{staticClass:"home-header MT_50"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("学者合作路径查询")]),t._v(" "),e("div",{staticClass:"home-header-search PR_20 PL_20"},[e("span",[t._v("查询人名")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("span",{staticClass:"ML_30"},[t._v("查询机构")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.org,callback:function(a){t.org=a},expression:"org"}}),t._v(" "),e("el-button",{staticClass:"ML_30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"论文合作学者",name:"first"}},[e("span",[t._v("说明：")]),t._v(" "),e("p",[t._v("同事：与查询学者在同机构且在同期刊上发文的学者")]),t._v(" "),e("p",[t._v("同领域学者：与查询学者在同期刊上发文的学者")]),t._v(" "),t.searchShow?e("div",{staticClass:"home-body row MT_50"},[e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[0],showPath:t.showPath,lable:"论文合作学者",haveData:t.haveData}}),t._v(" "),e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[1],lable:"论文合作者的合作者",showPath:t.showPath,haveData:t.haveData}})],1):t._e()]),t._v(" "),e("el-tab-pane",{attrs:{label:"同事",name:"second"}},[e("span",[t._v("说明：")]),t._v(" "),e("p",[t._v("同事：与查询学者在同机构且在同期刊上发文的学者")]),t._v(" "),e("p",[t._v("同领域学者：与查询学者在同期刊上发文的学者")]),t._v(" "),t.searchShow?e("div",{staticClass:"home-body row MT_50"},[e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[2],serach:t.isSeach,lable:"的同事",showPath:t.showPath,haveData:t.haveData},on:{query:t.query}}),t._v(" "),e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[4],lable:"的同事的论文合作者",showPath:t.showPath,haveData:t.haveData}}),t._v(" "),e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[3],lable:"的同事的论文合作者的合作者",showPath:t.showPath,haveData:t.haveData}})],1):t._e()]),t._v(" "),e("el-tab-pane",{attrs:{label:"同领域中国学者",name:"third"}},[e("span",[t._v("说明：")]),t._v(" "),e("p",[t._v("同事：与查询学者在同机构且在同期刊上发文的学者")]),t._v(" "),e("p",[t._v("同领域学者：与查询学者在同期刊上发文的学者")]),t._v(" "),t.searchShow?e("div",{staticClass:"home-body row MT_50"},[e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[5],lable:"的同领域学者",showPath:t.showPath,haveData:t.haveData}}),t._v(" "),e("tableTem",{staticClass:"tableTem",attrs:{tableData:t.tableData[6],lable:"的同领域学者的合作者",showPath:t.showPath,haveData:t.haveData}})],1):t._e()])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"查询",visible:t.dialogVisible,width:"60%","before-close":t.handleClose},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData[7],border:""}},[e("el-table-column",{attrs:{prop:"oData.Name",label:"姓名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"oData.Organization",label:"机构"}}),t._v(" "),e("el-table-column",{attrs:{prop:"oData.Email",label:"邮箱"}})],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var P=e("VU/8")(E,T,!1,function(t){e("/Rk4")},null,null).exports;s.default.use(c.a);var z=new c.a({routes:[{path:"/",name:"Home",component:P}]}),N=e("NYxO");s.default.use(N.a);var k=new N.a.Store({state:{bAuth:!1},mutations:{loginStatue:function(t,a){t.bAuth=a}}}),$=(e("j1ja"),e("Yg9U")),j=e.n($);e("yh13");s.default.config.productionTip=!1,s.default.use(n.a),s.default.use(j.a),z.beforeEach(function(t,a,e){t.meta.requiresAuth?k.state.bAuth?e():(alert("请先登录"),e("/Login")):e(),document.body.scrollTop=0,document.documentElement.scrollTop=0,window.pageYOffset=0,e()}),new s.default({el:"#app",router:z,components:{App:h},template:"<App/>"})},PDRJ:function(t,a){},mfEL:function(t,a){},tvR6:function(t,a){},yh13:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.c9e0d3a528b76615e48f.js.map